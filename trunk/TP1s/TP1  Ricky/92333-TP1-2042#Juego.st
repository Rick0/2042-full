Object subclass: #Escenario	instanceVariableNames: 'ancho alto avionesJugador avionesEnemigos avionesNeutrales balas tanques nivel puntaje estadoJuegoPerdido estadoJuegoGanado'	classVariableNames: ''	poolDictionaries: ''	category: '92333-TP1-2042/Juego'!!Escenario methodsFor: 'acciones' stamp: 'Zhang 5/5/2011 10:38'!unInstanteDelJuego	1 to: (avionesEnemigos size) do: [ :i |		(avionesEnemigos at: i) vivir.		].	1 to: (avionesJugador  size) do: [ :j |		(avionesJugador at: j) vivir.		].	1 to: (avionesNeutrales size) do: [ :k |		(avionesNeutrales at: k) vivir.		].	1 to: (balas size) do: [ :l |		(balas at: l) vivir.		].	1 to: (tanques size) do: [ :m |		(tanques at: m) vivir.		].! !!Escenario methodsFor: 'accessing' stamp: 'Zhang 5/4/2011 13:24'!getAlto	"Devuelve el alto del escenario, el limite en el eje y."	^alto.! !!Escenario methodsFor: 'accessing' stamp: 'Zhang 5/4/2011 13:25'!getAncho	"Devuelve el ancho del escenario, el limite en el eje x."	^ancho.! !!Escenario methodsFor: 'accessing' stamp: 'Zhang 5/4/2011 13:22'!getAvionesEnemigos	"Devuelve la lista de los aviones enemigos."	^avionesEnemigos.! !!Escenario methodsFor: 'accessing' stamp: 'Zhang 5/4/2011 13:23'!getAvionesJugador	"Devuelve la lista de los aviones que manejan el jugador.	Por ahora solo hay un avion, el Algo42."	^avionesJugador.! !!Escenario methodsFor: 'accessing' stamp: 'Zhang 5/4/2011 13:23'!getAvionesNeutrales	"Devuelve la lista de los aviones neutrales."	^avionesNeutrales.! !!Escenario methodsFor: 'accessing' stamp: 'Zhang 5/4/2011 13:21'!getBalas	"Devuelve la lista de todas las balas."	^balas.! !!Escenario methodsFor: 'accessing' stamp: 'Zhang 5/5/2011 10:46'!getDificultad	"Devuelve la dificultad, que depende del nivel en la cual se encuentra el juego."	^( 1 + ( 2/15*nivel ) ).! !!Escenario methodsFor: 'accessing' stamp: 'Zhang 5/5/2011 14:52'!getEstadoJuegoGanado	"Devuelve el estado del juego: false para no ganado, o sea jugando, y true para juego ganado."	^estadoJuegoGanado.! !!Escenario methodsFor: 'accessing' stamp: 'Zhang 5/5/2011 13:37'!getEstadoJuegoPerdido	"Devuelve el estado del juego: false para no perdido, o sea jugando, y true para juego perdido."	^estadoJuegoPerdido.! !!Escenario methodsFor: 'accessing' stamp: 'Zhang 5/5/2011 10:49'!getNivel	"Devuelve el nivel del escenario."	^nivel.! !!Escenario methodsFor: 'accessing' stamp: 'Zhang 5/4/2011 13:20'!getPuntaje	"Devuelve el puntaje logrado en el juego."	^puntaje.! !!Escenario methodsFor: 'accessing' stamp: 'Zhang 5/4/2011 13:20'!getTanques	"Devuelve la lista de tanques presentes en el escenario del juego."	^tanques.! !!Escenario methodsFor: 'accessing' stamp: 'Zhang 5/5/2011 14:54'!modificarPuntaje: puntosNuevos	"Agrega o resta puntos dependiendo del tipo de avion destruido."	puntaje := puntaje + puntosNuevos.	(puntaje < 0) ifTrue: [puntaje := 0].	(puntaje >= 1000) ifTrue: [		puntaje := 0.		nivel := nivel + 1.				(nivel = 15)			ifTrue: [ estadoJuegoGanado := true. ].   				self borrarTodo.		(avionesJugador size > 0)			ifTrue: [ (self getAvionesJugador at: 1) resetearAvion. ].		].! !!Escenario methodsFor: 'accessing' stamp: 'Zhang 5/5/2011 14:52'!setEstadoJuegoGanado: estado	"Cambia el estado del juego."	estadoJuegoGanado := estado.! !!Escenario methodsFor: 'accessing' stamp: 'Zhang 5/5/2011 13:39'!setEstadoJuegoPerdido: estado	"Cambia el estado del juego."	estadoJuegoPerdido := estado.! !!Escenario methodsFor: 'initialize' stamp: 'Zhang 5/5/2011 13:37'!initialize	"Crea el escenario, lugar donde se encuentran todos los aviones, las balas y los tanques."	| temporary variable names |	alto := 640.	ancho := 360.	avionesJugador := OrderedCollection new.	avionesEnemigos := OrderedCollection new.	avionesNeutrales := OrderedCollection new.	balas := OrderedCollection new.	tanques := OrderedCollection new.	nivel := 1.	puntaje := 0.	estadoJuegoPerdido := false.! !!Escenario methodsFor: 'borrar' stamp: 'Zhang 5/5/2011 16:40'!borrarAvionesEnemigos	"Borra todos los aviones enemigos del escenario."	(avionesEnemigos size > 0)		ifTrue: [ avionesEnemigos removeAll. ].! !!Escenario methodsFor: 'borrar' stamp: 'Zhang 5/5/2011 16:41'!borrarAvionesNeutrales	"Borra todos los aviones neutrales del escenario."	(avionesNeutrales size > 0)		ifTrue: [ avionesNeutrales removeAll. ].! !!Escenario methodsFor: 'borrar' stamp: 'Zhang 5/5/2011 16:41'!borrarBalas	"Borra todas las balas del escenario."	(balas size > 0)		ifTrue: [ balas removeAll. ].! !!Escenario methodsFor: 'borrar' stamp: 'Zhang 5/5/2011 16:41'!borrarTanques	"Borra todos los tanques del escenario."	(tanques size > 0)		ifTrue: [ tanques removeAll. ].! !!Escenario methodsFor: 'borrar' stamp: 'Zhang 5/5/2011 10:56'!borrarTodo	"Borra todo del escenario, excepto el avion jugador."	self borrarAvionesEnemigos.	self borrarAvionesNeutrales.	self borrarTanques.	self borrarBalas.! !Object subclass: #Tanque	instanceVariableNames: 'posicion tamanio contenido tiempoDeVida escenario'	classVariableNames: ''	poolDictionaries: ''	category: '92333-TP1-2042/Juego'!!Tanque methodsFor: 'acciones' stamp: 'Zhang 5/5/2011 03:49'!esUsado	"Un avion jugador toco el tanque y obtuvo su contenido, ahora el tanque desaparecera."	self morir.! !!Tanque methodsFor: 'acciones' stamp: 'Zhang 5/5/2011 21:30'!morir	"El tiempo de vida del tanque se ha acabado, y el tanque desaparecera del escenario."	(escenario getTanques size) > 0		ifTrue: [ (escenario getTanques) remove: (self). ].	! !!Tanque methodsFor: 'acciones' stamp: 'Zhang 5/3/2011 05:12'!pasaUnTiempo	"Pasa una unidad abstracta de tiempo.	Decrece el tiempo de vida del tanque."	tiempoDeVida := tiempoDeVida - 1.	(tiempoDeVida = 0) ifTrue: [ self morir. ].! !!Tanque methodsFor: 'acciones' stamp: 'Zhang 5/3/2011 05:12'!vivir	"El tanque en cada turno perdera tiempo de vida."	self pasaUnTiempo.! !!Tanque methodsFor: 'accessing' stamp: 'Zhang 4/22/2011 00:57'!getContenido	"Devuelve el contenido del tanque."	^contenido.! !!Tanque methodsFor: 'accessing' stamp: 'Zhang 5/4/2011 14:47'!getEscenario	"Devuelve el escenario sobre la cual esta el tanque."	^escenario.! !!Tanque methodsFor: 'accessing' stamp: 'Zhang 4/22/2011 00:56'!getPosicion	"Devuelve la posicion del tanque."	^posicion.! !!Tanque methodsFor: 'accessing' stamp: 'Zhang 5/4/2011 17:33'!getTamanio	"Devuelve el tamanio del tanque."	^tamanio.! !!Tanque methodsFor: 'accessing' stamp: 'Zhang 4/22/2011 00:56'!getTiempoDeVida	"Devuelve el tiempo de vida del tanque."	^tiempoDeVida.! !Tanque subclass: #TanqueDeArma	instanceVariableNames: ''	classVariableNames: ''	poolDictionaries: ''	category: '92333-TP1-2042/Juego'!!TanqueDeArma methodsFor: 'initialize' stamp: 'Zhang 5/4/2011 17:34'!crearTanqueDeArmaEn: posDelTanque  con: arma	"Crea un tanque de arma."		posicion := posDelTanque.	tamanio := 3.	tiempoDeVida := 1000.	contenido := arma.! !Error subclass: #JuegoExcepcion	instanceVariableNames: ''	classVariableNames: ''	poolDictionaries: ''	category: '92333-TP1-2042/Juego'!JuegoExcepcion subclass: #AvionNoValido	instanceVariableNames: ''	classVariableNames: ''	poolDictionaries: ''	category: '92333-TP1-2042/Juego'!AvionNoValido subclass: #AvionNeutralDispara	instanceVariableNames: ''	classVariableNames: ''	poolDictionaries: ''	category: '92333-TP1-2042/Juego'!AvionNoValido subclass: #AvionNoSeEncuentra	instanceVariableNames: ''	classVariableNames: ''	poolDictionaries: ''	category: '92333-TP1-2042/Juego'!AvionNoValido subclass: #AvionDestruidoNoSeEncuentra	instanceVariableNames: ''	classVariableNames: ''	poolDictionaries: ''	category: '92333-TP1-2042/Juego'!JuegoExcepcion subclass: #NumeroNoValido	instanceVariableNames: ''	classVariableNames: ''	poolDictionaries: ''	category: '92333-TP1-2042/Juego'!NumeroNoValido subclass: #VelocidadContNoValido	instanceVariableNames: ''	classVariableNames: ''	poolDictionaries: ''	category: '92333-TP1-2042/Juego'!NumeroNoValido subclass: #VelocidadDisparoContNoValido	instanceVariableNames: ''	classVariableNames: ''	poolDictionaries: ''	category: '92333-TP1-2042/Juego'!NumeroNoValido subclass: #EnergiaNegativo	instanceVariableNames: ''	classVariableNames: ''	poolDictionaries: ''	category: '92333-TP1-2042/Juego'!JuegoExcepcion subclass: #BalaNoSeEncuentra	instanceVariableNames: ''	classVariableNames: ''	poolDictionaries: ''	category: '92333-TP1-2042/Juego'!NumeroNoValido subclass: #DanioNegativo	instanceVariableNames: ''	classVariableNames: ''	poolDictionaries: ''	category: '92333-TP1-2042/Juego'!JuegoExcepcion subclass: #DireccionNoValida	instanceVariableNames: ''	classVariableNames: ''	poolDictionaries: ''	category: '92333-TP1-2042/Juego'!Tanque subclass: #TanqueDeEnergia	instanceVariableNames: ''	classVariableNames: ''	poolDictionaries: ''	category: '92333-TP1-2042/Juego'!!TanqueDeEnergia methodsFor: 'initialize' stamp: 'Zhang 5/4/2011 17:34'!crearTanqueDeEnergiaEn: posDelTanque	"Crea un tanque de energia."	posicion := posDelTanque.	tamanio := 3.	tiempoDeVida := 1000.	contenido := 200.! !